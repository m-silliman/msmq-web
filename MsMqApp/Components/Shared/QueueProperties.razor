@namespace MsMqApp.Components.Shared
@inherits QueuePropertiesBase

<div class="queue-properties">
    @if (Queue != null)
    {
        <div class="properties-header">
            <div class="queue-icon">
                <i class="bi bi-inbox-fill"></i>
            </div>
            <div class="header-content">
                <h4 class="queue-name">@Queue.Name</h4>
                <p class="queue-path text-muted">@Queue.Path</p>
            </div>
        </div>

        <div class="properties-tabs">
            <ul class="nav nav-tabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link @(ActiveTab == "general" ? "active" : "")"
                            type="button"
                            role="tab"
                            @onclick='() => SetActiveTab("general")'>
                        General
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link @(ActiveTab == "security" ? "active" : "")"
                            type="button"
                            role="tab"
                            @onclick='() => SetActiveTab("security")'>
                        Security
                    </button>
                </li>
            </ul>

            <div class="tab-content">
                @if (ActiveTab == "general")
                {
                    <div class="tab-pane active">
                        <div class="properties-form">
                            <!-- Label -->
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Label:</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" value="@Queue.Label" readonly />
                                </div>
                            </div>

                            <!-- Type ID -->
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Type ID:</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" value="@GetTypeIdDisplay()" readonly />
                                </div>
                            </div>

                            <!-- Checkboxes -->
                            <div class="form-group row">
                                <div class="col-sm-9 offset-sm-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" 
                                               checked="@HasMessageStorageLimit()" 
                                               disabled />
                                        <label class="form-check-label">
                                            Limit message storage to (KB): @GetMaxQueueSizeDisplay()
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" 
                                               checked="@Queue.Authenticate" 
                                               disabled />
                                        <label class="form-check-label">
                                            Authenticated
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" 
                                               checked="@Queue.IsTransactional" 
                                               disabled />
                                        <label class="form-check-label">
                                            Transactional queue
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Privacy Level -->
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label">Privacy level:</label>
                                <div class="col-sm-9">
                                    <select class="form-select" disabled>
                                        <option selected>@GetPrivacyLevelDisplay()</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Journal Section -->
                            <div class="journal-section">
                                <h6>Journal</h6>
                                <div class="form-group row">
                                    <div class="col-sm-9 offset-sm-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" 
                                                   checked="@Queue.UseJournalQueue" 
                                                   disabled />
                                            <label class="form-check-label">
                                                Enabled
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" 
                                                   checked="@HasJournalStorageLimit()" 
                                                   disabled />
                                            <label class="form-check-label">
                                                Limit journal storage to (KB): @GetMaxJournalSizeDisplay()
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Warning Message -->
                            @if (!Queue.Authenticate)
                            {
                                <div class="alert alert-warning d-flex align-items-center mt-3" role="alert">
                                    <i class="bi bi-exclamation-triangle-fill me-2"></i>
                                    <div>
                                        Queue is unauthenticated. Message senders can bypass the Access Control settings specified in the Security tab.
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                }
                else if (ActiveTab == "security")
                {
                    <div class="tab-pane active">
                        <div class="properties-form">
                            <div class="security-info">
                                <h6>Group or user names:</h6>
                                <div class="user-list">
                                    <div class="user-item">
                                        <i class="bi bi-people-fill me-2"></i>
                                        <span>Everyone</span>
                                    </div>
                                    <div class="user-item">
                                        <i class="bi bi-person-fill me-2"></i>
                                        <span>@GetComputerName()</span>
                                    </div>
                                    <div class="user-item">
                                        <i class="bi bi-person-fill me-2"></i>
                                        <span>@GetCurrentUser()</span>
                                    </div>
                                </div>

                                <div class="security-buttons mt-2">
                                    <button class="btn btn-sm btn-outline-secondary" disabled>Add...</button>
                                    <button class="btn btn-sm btn-outline-secondary" disabled>Remove</button>
                                </div>

                                <h6 class="mt-4">Permissions for Everyone</h6>
                                <table class="table table-sm permissions-table">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th>Allow</th>
                                            <th>Deny</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Full Control</td>
                                            <td><input type="checkbox" disabled /></td>
                                            <td><input type="checkbox" disabled /></td>
                                        </tr>
                                        <tr>
                                            <td>Delete</td>
                                            <td><input type="checkbox" disabled /></td>
                                            <td><input type="checkbox" disabled /></td>
                                        </tr>
                                        <tr>
                                            <td>Receive Message</td>
                                            <td><input type="checkbox" disabled /></td>
                                            <td><input type="checkbox" disabled /></td>
                                        </tr>
                                        <tr>
                                            <td>Peek Message</td>
                                            <td><input type="checkbox" disabled /></td>
                                            <td><input type="checkbox" disabled /></td>
                                        </tr>
                                        <tr>
                                            <td>Receive Journal Message</td>
                                            <td><input type="checkbox" disabled /></td>
                                            <td><input type="checkbox" disabled /></td>
                                        </tr>
                                    </tbody>
                                </table>

                                <div class="mt-3">
                                    <p class="text-muted small">
                                        For special permissions or advanced settings, click Advanced.
                                    </p>
                                    <button class="btn btn-sm btn-outline-secondary" disabled>Advanced</button>
                                </div>

                                <div class="alert alert-info mt-3" role="alert">
                                    <i class="bi bi-info-circle me-2"></i>
                                    Security management is read-only in this version. Use Computer Management to modify permissions.
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    }
    else
    {
        <div class="no-queue-selected">
            <i class="bi bi-inbox text-muted"></i>
            <p class="text-muted">No queue selected</p>
        </div>
    }
</div>
